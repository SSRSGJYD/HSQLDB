### HSQLDB的索引机制分析

软件62 周展平 2016013253

------

[TOC]

### 实验要求

#### 一、索引的具体实现机制

相关的包为org.hsqldb.index，索引和AVL树的相关类图如下：

![](索引.png)

其中，Index接口是索引操作的规约，IndexAVL类对应于索引。cached table与text table使用IndexAVL类的实现索引，而memory table使用IndexAVL类的子类IndexAVLMemory类的实现索引。索引通过AVL树来实现，其中的结点的基类为NodeAVL，代表AVL树中的结点。实例化的时候，选择它的两个子类NodeAVLDisk与NodeAVLDiskLarge之一，后者对应于较大的数据库。每一个NodeAVL类的实例与一个RowAVL类的实例相对应，其中NodeAVLDisk类对应于RowAVLDisk类，而NodeAVLDiskLarge类对应于RowAVLDiskLarge类。

可以通过IndexAVL类的方法getAccessor()找到根节点。NodeAVL结点维护了左子树、右子树、父亲结点的信息。通过NodeAVL中的row属性访问结点对应的Row类的实例。nNext属性建立了所有结点在一维上的全序关系。



#### 二、索引的创建时机、增删改记录时索引的变化

